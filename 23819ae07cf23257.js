(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[43432],{

/***/ 191943:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(471642);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var X0=__c.X0;var K=__c.K;
var uLc=async function(a,b){return a.cua(b,async()=>{const c=(0,__c.uc)()();try{if(a.KYa==null)throw Error("Scene document resources are not supported");const d=c.r(await c.s(a.KYa.Xr({id:b,version:1},void 0))),e={id:d.id,files:{N0a:d.content.url,IJa:d.Zc?.url}};(0,__c.Xb)(()=>{a.scenes.set(e.id,e)});return e}finally{c.s()}})},xLc=function(a,b){if(a.Th.wib&&b instanceof vLc)return new wLc(a.Th.wib,b);throw Error("GltfResource needs GltfResource");},zLc=function(a){return yLc?new vLc(a):new vLc(a,
{environment_sdr:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_sdr.png",environment_gain:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_gain.png"})},ALc=function(a,b,c){let d=b-1,e=0,f=c-1,g=0;for(let h=0;h<c;h++)for(let k=0;k<b;k++)a[3+(h*b+k)*4]!==0&&(d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h));a=g-f+1;return{left:d,top:c-(f+a),width:e-d+1,height:a}},BLc=function(a,b,c){const d=a.store.pF?a.Th.canvas:
a.store.$E;if(d){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");a.store.pF&&a.render(!1);c.width=b;c.height=b;e.drawImage(d,0,0,b,b)}},CLc=function(a,b){a.store.container=b;b.contains(a.Th.canvas)||b.appendChild(a.Th.canvas)},ELc=function(a){if(a.store.bf){const b=requestAnimationFrame(DLc.wrap(()=>ELc(a)));a.store.sga=b;a.render(a.store.mZa)}},HLc=function({Zka:a,Th:b}){const c=new FLc;return new GLc(c,a,b)},ILc=function(a){var b=__c.z(a.store.container,"Missing container"),
c=a.Gg.l_;b.style.width=2E3*a.Gg.ea+"px";b.style.height=2E3*a.Gg.ea+"px";b.style.left=`-${c.left*a.Gg.ea}px`;b.style.top=`-${c.top*a.Gg.ea}px`;b.style.position="absolute";c=new Image;{var d=a.Gg;b=a.P_(b);const e=d.store.pF?d.Th.canvas:d.store.$E;e?(d.store.pF&&(E7(d.Th,b,b),d.render(!1)),d=e.toDataURL("image/png")):d=""}c.src=d;a.store.GN=c},KLc=function(a){var b=__c.z(a.store.container,"Missing container");b.style.position="init";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height=
"100%";const c=document.createElement("canvas");var d=a.Gg;b=a.P_(b);if(d.store.isInitialized){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");var f=b/2E3,g=d.Y8();c.width=f*g.width;c.height=f*g.height;const h=JLc(d.Th);E7(d.Th,b,b);d.render(!1);e.drawImage(d.Th.canvas,g.left*f,g.top*f,g.width*f,g.height*f,0,0,g.width*f,g.height*f);E7(d.Th,h.width,h.height)}else if(d.store.$E){e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");f=d.store.Rga;g=d.store.gT/
2E3;b/=2E3;c.width=Math.round(b*f.width);c.height=Math.round(b*f.height);e.drawImage(d.store.$E,f.left*g,f.top*g,f.width*g,f.height*g,0,0,c.width,c.height)}d=new Image;d.src=c.toDataURL("image/png");a.store.GN=d;c.width=1;c.height=1},LLc=function(a){const b=a.kn;a=__c.FN.create({...__c.YC,image:{...__c.AIb,media:{...__c.iEb,id:a.NJ,version:1},Ab:void 0}});return F7(b,{fill:a})},OLc=function({Yjb:a,Rkb:b,Mkb:c,tia:d,hAb:e,kn:f,Lra:g}){switch(d){case 1:return F7(c,{});case 3:return F7(MLc,{h$:e||""});
case 0:return F7(b,{});case 2:return F7(LLc,{kn:f,NJ:g||""});case 4:return F7(a,{});case 5:return F7(NLc,{});default:throw new __c.A(d);}},VLc=function({cq:a,Ae:b,kn:c,rA:d,Th:e,sqa:f,exports:g,H7:h}){const k=new PLc,l=new QLc(k,a,b,d,e,f,h),m=RLc(a),n=SLc(a),p=()=>F7("div",{children:"Error"});return TLc(()=>{G7(()=>{l.initialize();return()=>{l.destroy()}},[]);G7(()=>{l.s3&&l.si&&g.Emb&&g.Emb()});return F7(ULc,{Wd:l.Wd,children:F7(OLc,{tia:l.tia,hAb:l.h$,selected:l.si,Lra:l.Lra,kn:c,Mkb:n,Rkb:m,Yjb:p})})})},
YLc=function(a){return WLc(({data:b,ig:{kn:c},Ga:{Ae:d}})=>{const e=XLc(()=>VLc({cq:b,Ae:d,kn:c,...a}),[b,d,c]);return F7("div",{className:"N73IPQ",children:F7(e,{})})})},$Lc=function(a,b,c){a=a.startSpan("load_resource",c);return ZLc(a,b)},ZLc=function(a,b){return(typeof b==="function"?b():b).catch(DLc.wrap(c=>{a.setStatus("error");throw c;})).finally(DLc.wrap(()=>{a.end()}))},E7=function(a,b,c){a.canvas.width=b;a.canvas.height=c},aMc=function(a,b){a.cca=a.cca.filter(c=>c!==b)},JLc=function(a){return{width:a.canvas.width,
height:a.canvas.height}},cMc=async function(a){const b=H7()();try{a.bR||(a.bR=I7());try{const [{default:c,WebGlRenderer:d},{default:e}]=b.r(await b.s(Promise.all([__webpack_require__.me(19779),__webpack_require__.me(286814)])));b.r(await b.s(c({path:e})));a.WQa=d}catch(c){throw b.r(),a.r5=void 0,Error("Failed to initialize renderer",{cause:c});}try{a.hR=bMc(a)}catch(c){a.K.info(`Unable to initialize WebGL context error: ${c}`),J7(()=>{a.Pva=!0})}}finally{b.s()}},I7=function(){const a=document.createElement("canvas");
a.width=1E3;a.height=1E3;a.style.width="100%";a.style.visibility="visible";return a},bMc=function(a,b=0){if(b>5)throw Error("Unable to recreate context");const c=dMc(a);a.hR=new (__c.z(a.WQa))(c);a.hR.onContextLost=()=>{a.K.info("WebGL context lost for scene widget");a.hR=void 0;a.r5=void 0;a.UGa=()=>{const d=a.canvas;a.bR=I7();a.WQa&&bMc(a,b+1);a.cca.forEach(e=>e(d));a.UGa=void 0}};return a.hR},dMc=function(a){a=a.canvas;let b;const c=e=>{b=e.statusMessage??"Unknown"};a.addEventListener("webglcontextcreationerror",
c);const d=a.getContext("webgl");a.removeEventListener("webglcontextcreationerror",c);if(d!=null)return d;throw Error(b);};
__c.Eq.prototype.cua=__c.ea(8,function(a,b){const c=this.Gi.get(__c.Bq(a));if(c!=null&&c.Gab!=null){const e=this.AY.get(__c.Bq(c.ref));if(e!=null)return Promise.resolve({...c,element:e})}const d=__c.Bq(a);if(a=this.pending.get(d))return a;c!=null&&c.Gab!=null&&(b=async()=>{const e=(0,__c.uc)()();try{const f=e.r(await e.s(__c.Dq(this,c)));return{...c,element:f}}finally{e.s()}});b=b().finally(__c.Aa.wrap(()=>this.pending.delete(d)));this.pending.set(d,b);return b});
__c.Fq.prototype.cua=__c.ea(7,function(a,b){var c=this.scenes.get(a);if(c)return Promise.resolve(c);if(c=this.pending.get(a))return c;b=b().finally(__c.Aa.wrap(()=>this.pending.delete(a)));this.pending.set(a,b);return b});var eMc=__webpack_require__(19779),wLc=eMc.GltfRenderer,vLc=eMc.GltfResource;var K7=__webpack_require__(186901),L7=K7.EW,J7=K7.h5,M7=K7.mJ,N7=K7.sH,O7=K7.XI;var DLc=__webpack_require__(245307).Fm;var H7=__webpack_require__(75402)._;var fMc=__webpack_require__(724707),F7=fMc.jsx,gMc=fMc.jsxs;var P7=__webpack_require__(979267),WLc=P7.memo,G7=P7.useEffect,XLc=P7.useMemo,hMc=P7.useRef,iMc=P7.useState;var TLc=__webpack_require__(494690).PA;var yLc=__c.sc("1aab289f",!1),jMc=class{constructor(a){this.Th=a}};var kMc=class{static G(a){K(a,{selected:N7.ref,Jta:N7.ref,Ita:N7.ref,p$:N7.ref,IBb:N7.ref})}constructor(a){this.Gg=a;this.selected=(kMc.G(this),!1);this.Ita=this.Jta=!1;this.p$=0;this.IBb=!1}};var GLc=class{static G(a){K(a,{initialize:O7,pvb:O7,kNa:O7,edb:O7,dispose:O7,Y8:O7,gla:O7,web:O7})}async initialize(a){const b=H7()();try{if(!this.store.isInitialized&&!this.store.Wd){this.store.Wd=!0;var c=zLc(a);this.store.$ka=c;b.r(await b.s(c.load()));c===this.store.$ka&&(this.store.pF=xLc(this.Zka,c),this.Th.cca.push(this.gla),this.render(!0),J7(()=>{this.store.isInitialized=!0;this.store.Wd=!1}))}}finally{b.s()}}pvb(a,b,c=!0){const d=this.Y8();this.store.l_=d;a=Math.round(Math.min(a.width*2E3/
d.width,2E3));E7(this.Th,a,a);this.store.gT=a;this.store.ea=b;this.store.mZa=c;this.web()}get gT(){return this.store.gT}get l_(){return this.store.l_}kNa(){this.store.bf=!1;this.store.sga!=null&&(cancelAnimationFrame(this.store.sga),this.store.sga=void 0)}edb(a){this.store.vS=a}async dispose(){const a=H7()();try{this.kNa();if(this.isInitialized&&this.store.container?.contains(this.Th.canvas)){this.store.Rga=this.Y8();const c=document.createElement("canvas");BLc(this,this.store.gT,c);this.store.$E=
c}this.store.pF?.dispose();this.store.pF=void 0;this.store.isInitialized=!1;aMc(this.Th,this.gla);this.store.Wd=!1;const b=this.store.$ka;this.store.$ka=void 0;a.r(await a.s(b?.load()));b?.dispose()}finally{a.s()}}Y8(){if(this.store.Sga&&this.store.vS===this.store.Sga?.jJb)return this.store.Sga.ha;var a=JLc(this.Th);E7(this.Th,2E3,2E3);this.render(!1);const b=this.Th.getImageData();E7(this.Th,a.width,a.height);a=this.gxb(b.data,b.width,b.height);this.store.Sga={jJb:this.store.vS,ha:a};return a}get isInitialized(){return this.store.isInitialized}get Wd(){return this.store.Wd}get bf(){return this.store.bf}get ea(){return this.store.ea}web(){this.kNa();
this.store.bf=!0;ELc(this)}render(a){this.store.pF?.render({distance:1,rotationPhi:this.store.vS.rotation.x,rotationTheta:this.store.vS.rotation.y,enableGrid:a})}constructor(a,b,c,d=ALc){this.store=a;this.Zka=b;this.Th=c;this.gxb=d;this.gla=(GLc.G(this),e=>{J7(()=>{const f=this.store.$ka,g=this.store.container;g&&this.store.isInitialized&&f&&(g.contains(e)&&g.removeChild(e),CLc(this,g),this.store.pF?.dispose(),this.store.pF=void 0,this.store.pF=xLc(this.Zka,f),this.Th.cca.push(this.gla),this.store.isInitialized=
!0)})})}};var FLc=class{static G(a){K(a,{bf:N7.ref,vS:N7.ref,sga:N7.ref,$E:N7.ref,Rga:N7.ref,Sga:N7.ref,isInitialized:N7.ref,Wd:N7.ref,ea:N7.ref,l_:N7.ref})}constructor(){this.container=(FLc.G(this),void 0);this.mZa=this.bf=!1;this.vS={rotation:{x:0,y:0,z:0}};this.Rga={left:0,top:0,width:1,height:1};this.Wd=this.isInitialized=!1;this.ea=1;this.l_={left:0,top:0,width:1,height:1};this.gT=0}};var lMc=({qBb:a})=>gMc("div",{className:"Wfem7A",children:[F7("div",{className:"CSoSRg"}),F7("div",{className:"__J59g",style:{width:a?"100%":"init",height:a?"init":"100%",aspectRatio:"1"},children:F7("div",{className:"tEhdig"})})]}),ULc=({children:a,Wd:b})=>{const c=hMc(null),[d,e]=iMc(!1);G7(()=>{c.current&&e(c.current.clientWidth>=c.current.clientHeight)},[c]);return b?F7("div",{ref:c,className:"uDEnGQ",children:gMc("div",{className:"E8BDLQ",children:[F7("div",{className:"II7r4Q",children:a}),F7(lMc,
{qBb:d})]})}):a};var mMc=({mGb:a,lGb:b})=>{const c=hMc(null);G7(()=>{const d=c.current;c.current&&a(c.current);return()=>{d&&b()}},[c,a,b]);return F7("div",{ref:c,style:{display:"block",position:"absolute"}})};var nMc=class{get Gg(){return this.local.Gg}constructor(a){this.local=a;this.zyb=b=>{const c=this.Gg.l_;b.style.width=2E3*this.Gg.ea+"px";b.style.height=2E3*this.Gg.ea+"px";b.style.left=`-${c.left*this.Gg.ea}px`;b.style.top=`-${c.top*this.Gg.ea}px`;CLc(this.Gg,b)};this.yyb=()=>{var b=this.Gg;if(b.isInitialized&&b.store.container?.contains(b.Th.canvas)){b.store.Rga=b.Y8();const c=document.createElement("canvas");BLc(b,b.store.gT,c);b.store.$E=c}b.store.container?.removeChild(b.Th.canvas);b.store.container=
void 0}}};var SLc=({local:a})=>{const b=new nMc(a);return()=>F7(mMc,{mGb:b.zyb,lGb:b.yyb})};var oMc=({GN:a,LGb:b,onDispose:c})=>{const d=hMc(null);G7(()=>{d.current&&b(d.current);return()=>c()},[d,b,c]);G7(()=>{d.current&&a&&(a.style.width="100%",a.style.height="100%",d.current.firstChild&&d.current.removeChild(d.current.firstChild),d.current.appendChild(a))},[d,a]);return F7("div",{ref:d,style:{width:"100%",height:"100%"}})};var pMc=__c.sc("75810be2",!1),qMc=class{static G(a){K(a,{initialize:O7.bound,dispose:O7.bound,zYa:O7})}initialize(a){pMc||(this.store.container=a,this.store.AYa=M7(()=>[this.Gg.store.vS,this.Gg.bf],this.Dyb,{fireImmediately:!1}),this.store.xYa=M7(()=>this.local.Ita,this.Ayb,{fireImmediately:!0}))}dispose(){this.zYa();this.store.AYa?.();this.store.AYa=void 0;this.store.xYa?.();this.store.xYa=void 0}get GN(){return this.store.GN}P_(a){a=a.getBoundingClientRect();return Math.max(a.width,a.height)>100?
this.Gg.gT:300}get Gg(){return this.local.Gg}zYa(){this.store.GN=void 0}constructor(a,b){this.store=a;this.local=b;this.Dyb=(qMc.G(this),()=>{this.Gg.bf||(this.local.Ita?ILc(this):KLc(this))});this.Ayb=()=>{this.local.Ita?ILc(this):KLc(this)}}};var rMc=class{static G(a){K(a,{GN:N7.ref})}constructor(){this.container=(rMc.G(this),void 0)}};var RLc=({local:a})=>{const b=new rMc,c=new qMc(b,a);return TLc(()=>F7(oMc,{LGb:c.initialize,onDispose:c.dispose,GN:c.GN}))};var NLc=()=>F7("div",{className:"_7SJjPA"});var MLc=({h$:a})=>F7("img",{src:a,style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}});var QLc=class{static G(a){K(a,{initialize:O7,destroy:O7,tia:L7,Wd:L7,isError:L7,h$:L7,pC:L7,si:L7,X0a:O7,b1a:O7,c1a:O7})}async initialize(){const a=H7()();try{this.store.Zsb=M7(()=>this.pC,this.X0a,{fireImmediately:!0});const b=a.r(await a.s(uLc(this.rA,this.cq.D.scene.id)));J7(()=>{this.store.scene=b})}finally{a.s()}}destroy(){this.pC&&this.cq.local.p$--;this.cq.local.p$===0&&this.Gg.dispose();this.store.Zsb?.();this.store.NAa?.();this.store.MAa?.();this.store.BYa?.()}get tia(){return this.FFa&&
this.pC&&!this.Gg.bf||this.pC&&this.FFa&&!this.si||!this.pC&&this.FFa?0:this.rBb&&this.Gg.bf?1:this.Lra?2:this.h$?3:this.isError?4:5}get Wd(){return this.pC&&this.si&&!this.Gg.isInitialized}get isError(){return!!this.store.scene&&!this.store.scene.files.IJa}get h$(){return this.store.scene?.files.IJa}get FFa(){return this.cq.local.Jta}get Lra(){return this.cq.D.config.ref.snapshot?.id}get pC(){return!this.H7&&this.Ae===30&&!this.Th.B3a}get s3(){return this.store.s3}get si(){return this.cq.local.selected}get rBb(){return this.pC&&
this.si&&this.Gg.isInitialized}get Gg(){return this.cq.local.Gg}get D(){return this.cq.D}constructor(a,b,c,d,e,f,g){this.store=a;this.cq=b;this.Ae=c;this.rA=d;this.Th=e;this.sqa=f;this.H7=g;this.Oyb=(QLc.G(this),()=>{if(!this.cq.local.Jta){var h=this.Gg;h.store.$E&&(h.store.$E.width=1,h.store.$E.height=1,h.store.$E=void 0)}});this.X0a=(h,k)=>{this.store.NAa?.();this.store.MAa?.();this.store.BYa?.();k&&this.cq.local.p$--;this.pC?(this.cq.local.p$++,this.store.NAa=M7(()=>({selected:this.si,scene:this.store.scene}),
({selected:l,scene:m})=>this.b1a(l,m),{fireImmediately:!0}),this.store.MAa=M7(()=>[this.cq.D.config.ref.rotationPhi,this.cq.D.config.ref.rotationTheta],this.Gyb,{fireImmediately:!0}),this.store.BYa=M7(()=>[this.cq.local.Jta],this.Oyb,{fireImmediately:!1})):this.store.NAa=M7(()=>({selected:this.si}),({selected:l})=>this.c1a(l),{fireImmediately:!0})};this.b1a=async(h,k)=>{const l=H7()();try{if(k!=null)if(!h)this.Gg.dispose();else if(!this.Gg.Wd){var m=__c.z(k.files.N0a);l.r(await l.s(this.Th.wTb));
if(!this.Th.B3a){var n=this.sqa.startSpan("select");l.r(await l.s($Lc(this.sqa,async()=>{const p=H7()();try{p.r(await p.s(this.Gg.initialize(m)))}finally{p.s()}},n)));n.end()}}}finally{l.s()}};this.c1a=h=>{this.store.s3=this.H7;h||(this.store.s3=!1)};this.Gyb=()=>{this.Gg.bf||this.Gg.edb({rotation:{x:this.cq.D.config.ref.rotationPhi,y:this.cq.D.config.ref.rotationTheta,z:0}})}}};var PLc=class{static G(a){K(a,{scene:N7.ref,s3:N7.ref})}constructor(){this.MAa=(PLc.G(this),void 0);this.s3=!1}};var sMc=class{startSpan(a,b){a=`scene.${a}`;return b?this.hb.startSpan(a,b):this.hb.Ci(a,{lr:{name:`editor.${a}`,performance:{VJ:!0}}})}constructor(a){this.hb=a}};var tMc=__c.sc("5eb77351",!1),uMc=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi)||tMc,vMc=class{static G(a){K(a,{Pva:N7.ref})}get B3a(){return this.Pva}get wTb(){this.UGa&&this.UGa();this.r5||(this.r5=cMc(this));return this.r5}get canvas(){this.bR||(this.bR=I7());return this.bR}get wib(){return this.hR}getImageData(){__c.y(this.hR!=null,"WebGlRenderer is not initialized");return this.hR.readPixels()}constructor(a){this.K=a;this.bR=(vMc.G(this),void 0);this.cca=[];this.Pva=!1;uMc||(this.bR=
I7(),this.r5=cMc(this))}};var wMc=__c.Y_()(()=>({qZb(a,b,c){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:void 0,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},S:{width:b,height:c}}},rZb(a,b,c,d){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:b,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},S:{width:c,height:d}}}}));var xMc=__c.e0({D:__c.d0({scene:X0.Zj(1,"SceneRef"),config:X0.oUa(2,{snapshot:X0.HHb(1,"MediaRef"),rotationPhi:X0.NYa(2,{min:0,max:6.284}),rotationTheta:X0.NYa(3,{min:-1.571,max:1.571})})})});var yMc,zMc;yMc=__c.sc("646956e3",!1);zMc=__c.I_()(({ei:a,eI:b})=>{var c=b.hb;b=b.K.vd("scene_widget_rendering");c=new sMc(c);const d=new vMc(b),e=new jMc(d),f=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi)&&!yMc;b={H7:f};a=YLc({rA:a.rA,Th:d,sqa:c,exports:b,H7:f});return{metadata:{type:"scene",name:__c.J("6XoKOg"),uW:g=>g.scene.id},d7:()=>{const g=HLc({Zka:e,Th:d});return new kMc(g)},D:__c.H_(a),exports:b}});__c.k0={};__c.k0.$Vb=kMc;__c.k0.bh=wMc;__c.k0.xo=zMc;__c.k0.dh=xMc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/23819ae07cf23257.js.map