(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[43432],{

/***/ 191943:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(471642);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var J0=__c.J0;var L=__c.L;
var qOc=async function(a,b){return a.Dua(b,async()=>{const c=(0,__c.xc)()();try{if(a.AZa==null)throw Error("Scene document resources are not supported");const d=c.r(await c.s(a.AZa.bs({id:b,version:1},void 0))),e={id:d.id,files:{F1a:d.content.url,oKa:d.$c?.url}};(0,__c.$b)(()=>{a.scenes.set(e.id,e)});return e}finally{c.s()}})},tOc=function(a,b){if(a.Uh.Cjb&&b instanceof rOc)return new sOc(a.Uh.Cjb,b);throw Error("GltfResource needs GltfResource");},vOc=function(a){return uOc?new rOc(a):new rOc(a,
{environment_sdr:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_sdr.png",environment_gain:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_gain.png"})},wOc=function(a,b,c){let d=b-1,e=0,f=c-1,g=0;for(let h=0;h<c;h++)for(let k=0;k<b;k++)a[3+(h*b+k)*4]!==0&&(d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h));a=g-f+1;return{left:d,top:c-(f+a),width:e-d+1,height:a}},xOc=function(a,b,c){const d=a.store.sF?a.Uh.canvas:
a.store.eF;if(d){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");a.store.sF&&a.render(!1);c.width=b;c.height=b;e.drawImage(d,0,0,b,b)}},yOc=function(a,b){a.store.container=b;b.contains(a.Uh.canvas)||b.appendChild(a.Uh.canvas)},AOc=function(a){if(a.store.af){const b=requestAnimationFrame(zOc.wrap(()=>AOc(a)));a.store.Gga=b;a.render(a.store.c_a)}},DOc=function({sla:a,Uh:b}){const c=new BOc;return new COc(c,a,b)},EOc=function(a){var b=__c.z(a.store.container,"Missing container"),
c=a.Ig.z_;b.style.width=2E3*a.Ig.da+"px";b.style.height=2E3*a.Ig.da+"px";b.style.left=`-${c.left*a.Ig.da}px`;b.style.top=`-${c.top*a.Ig.da}px`;b.style.position="absolute";c=new Image;{var d=a.Ig;b=a.b0(b);const e=d.store.sF?d.Uh.canvas:d.store.eF;e?(d.store.sF&&(D7(d.Uh,b,b),d.render(!1)),d=e.toDataURL("image/png")):d=""}c.src=d;a.store.QN=c},GOc=function(a){var b=__c.z(a.store.container,"Missing container");b.style.position="init";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height=
"100%";const c=document.createElement("canvas");var d=a.Ig;b=a.b0(b);if(d.store.isInitialized){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");var f=b/2E3,g=d.o9();c.width=f*g.width;c.height=f*g.height;const h=FOc(d.Uh);D7(d.Uh,b,b);d.render(!1);e.drawImage(d.Uh.canvas,g.left*f,g.top*f,g.width*f,g.height*f,0,0,g.width*f,g.height*f);D7(d.Uh,h.width,h.height)}else if(d.store.eF){e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");f=d.store.gha;g=d.store.oT/
2E3;b/=2E3;c.width=Math.round(b*f.width);c.height=Math.round(b*f.height);e.drawImage(d.store.eF,f.left*g,f.top*g,f.width*g,f.height*g,0,0,c.width,c.height)}d=new Image;d.src=c.toDataURL("image/png");a.store.QN=d;c.width=1;c.height=1},HOc=function(a){const b=a.rn;a=__c.LO.create({...__c.jE,image:{...__c.QJb,media:{...__c.xFb,id:a.RJ,version:1},Bb:void 0}});return E7(b,{fill:a})},KOc=function({dlb:a,Xlb:b,Slb:c,Lia:d,sBb:e,rn:f,ksa:g}){switch(d){case 1:return E7(c,{});case 3:return E7(IOc,{y$:e||""});
case 0:return E7(b,{});case 2:return E7(HOc,{rn:f,RJ:g||""});case 4:return E7(a,{});case 5:return E7(JOc,{});default:throw new __c.A(d);}},ROc=function({gq:a,qe:b,rn:c,xA:d,Uh:e,Qqa:f,exports:g,U7:h}){const k=new LOc,l=new MOc(k,a,b,d,e,f,h),m=NOc(a),n=OOc(a),p=()=>E7("div",{children:"Error"});return POc(()=>{F7(()=>{l.initialize();return()=>{l.destroy()}},[]);F7(()=>{l.H3&&l.ui&&g.Lnb&&g.Lnb()});return E7(QOc,{Xd:l.Xd,children:E7(KOc,{Lia:l.Lia,sBb:l.y$,selected:l.ui,ksa:l.ksa,rn:c,Slb:n,Xlb:m,dlb:p})})})},
UOc=function(a){return SOc(({data:b,hg:{rn:c},Ha:{qe:d}})=>{const e=TOc(()=>ROc({gq:b,qe:d,rn:c,...a}),[b,d,c]);return E7("div",{className:"N73IPQ",children:E7(e,{})})})},WOc=function(a,b,c){a=a.startSpan("load_resource",c);return VOc(a,b)},VOc=function(a,b){return(typeof b==="function"?b():b).catch(zOc.wrap(c=>{a.setStatus("error");throw c;})).finally(zOc.wrap(()=>{a.end()}))},D7=function(a,b,c){a.canvas.width=b;a.canvas.height=c},XOc=function(a,b){a.rca=a.rca.filter(c=>c!==b)},FOc=function(a){return{width:a.canvas.width,
height:a.canvas.height}},ZOc=async function(a){const b=G7()();try{a.jR||(a.jR=H7());try{const [{default:c,WebGlRenderer:d},{default:e}]=b.r(await b.s(Promise.all([__webpack_require__.me(19779),__webpack_require__.me(286814)])));b.r(await b.s(c({path:e})));a.GRa=d}catch(c){throw b.r(),a.E5=void 0,Error("Failed to initialize renderer",{cause:c});}try{a.pR=YOc(a)}catch(c){a.K.info(`Unable to initialize WebGL context error: ${c}`),I7(()=>{a.swa=!0})}}finally{b.s()}},H7=function(){const a=document.createElement("canvas");
a.width=1E3;a.height=1E3;a.style.width="100%";a.style.visibility="visible";return a},YOc=function(a,b=0){if(b>5)throw Error("Unable to recreate context");const c=$Oc(a);a.pR=new (__c.z(a.GRa))(c);a.pR.onContextLost=()=>{a.K.info("WebGL context lost for scene widget");a.pR=void 0;a.E5=void 0;a.xHa=()=>{const d=a.canvas;a.jR=H7();a.GRa&&YOc(a,b+1);a.rca.forEach(e=>e(d));a.xHa=void 0}};return a.pR},$Oc=function(a){a=a.canvas;let b;const c=e=>{b=e.statusMessage??"Unknown"};a.addEventListener("webglcontextcreationerror",
c);const d=a.getContext("webgl");a.removeEventListener("webglcontextcreationerror",c);if(d!=null)return d;throw Error(b);};
__c.Oq.prototype.Dua=__c.da(10,function(a,b){const c=this.Gi.get(__c.Lq(a));if(c!=null&&c.Hbb!=null){const e=this.NY.get(__c.Lq(c.ref));if(e!=null)return Promise.resolve({...c,element:e})}const d=__c.Lq(a);if(a=this.pending.get(d))return a;c!=null&&c.Hbb!=null&&(b=async()=>{const e=(0,__c.xc)()();try{const f=e.r(await e.s(__c.Nq(this,c)));return{...c,element:f}}finally{e.s()}});b=b().finally(__c.Da.wrap(()=>this.pending.delete(d)));this.pending.set(d,b);return b});
__c.Pq.prototype.Dua=__c.da(9,function(a,b){var c=this.scenes.get(a);if(c)return Promise.resolve(c);if(c=this.pending.get(a))return c;b=b().finally(__c.Da.wrap(()=>this.pending.delete(a)));this.pending.set(a,b);return b});var aPc=__webpack_require__(19779),sOc=aPc.GltfRenderer,rOc=aPc.GltfResource;var J7=__webpack_require__(186901),K7=J7.EW,I7=J7.h5,L7=J7.mJ,M7=J7.sH,N7=J7.XI;var zOc=__webpack_require__(245307).Fm;var G7=__webpack_require__(75402)._;var bPc=__webpack_require__(724707),E7=bPc.jsx,cPc=bPc.jsxs;var O7=__webpack_require__(979267),SOc=O7.memo,F7=O7.useEffect,TOc=O7.useMemo,dPc=O7.useRef,ePc=O7.useState;var POc=__webpack_require__(494690).PA;var uOc=__c.vc("1aab289f",!1),fPc=class{constructor(a){this.Uh=a}};var gPc=class{static G(a){L(a,{selected:M7.ref,jua:M7.ref,iua:M7.ref,G$:M7.ref,VCb:M7.ref})}constructor(a){this.Ig=a;this.selected=(gPc.G(this),!1);this.iua=this.jua=!1;this.G$=0;this.VCb=!1}};var COc=class{static G(a){L(a,{initialize:N7,Cwb:N7,TNa:N7,ieb:N7,dispose:N7,o9:N7,Ala:N7,Afb:N7})}async initialize(a){const b=G7()();try{if(!this.store.isInitialized&&!this.store.Xd){this.store.Xd=!0;var c=vOc(a);this.store.tla=c;b.r(await b.s(c.load()));c===this.store.tla&&(this.store.sF=tOc(this.sla,c),this.Uh.rca.push(this.Ala),this.render(!0),I7(()=>{this.store.isInitialized=!0;this.store.Xd=!1}))}}finally{b.s()}}Cwb(a,b,c=!0){const d=this.o9();this.store.z_=d;a=Math.round(Math.min(a.width*2E3/
d.width,2E3));D7(this.Uh,a,a);this.store.oT=a;this.store.da=b;this.store.c_a=c;this.Afb()}get oT(){return this.store.oT}get z_(){return this.store.z_}TNa(){this.store.af=!1;this.store.Gga!=null&&(cancelAnimationFrame(this.store.Gga),this.store.Gga=void 0)}ieb(a){this.store.DS=a}async dispose(){const a=G7()();try{this.TNa();if(this.isInitialized&&this.store.container?.contains(this.Uh.canvas)){this.store.gha=this.o9();const c=document.createElement("canvas");xOc(this,this.store.oT,c);this.store.eF=
c}this.store.sF?.dispose();this.store.sF=void 0;this.store.isInitialized=!1;XOc(this.Uh,this.Ala);this.store.Xd=!1;const b=this.store.tla;this.store.tla=void 0;a.r(await a.s(b?.load()));b?.dispose()}finally{a.s()}}o9(){if(this.store.hha&&this.store.DS===this.store.hha?.CKb)return this.store.hha.ia;var a=FOc(this.Uh);D7(this.Uh,2E3,2E3);this.render(!1);const b=this.Uh.getImageData();D7(this.Uh,a.width,a.height);a=this.syb(b.data,b.width,b.height);this.store.hha={CKb:this.store.DS,ia:a};return a}get isInitialized(){return this.store.isInitialized}get Xd(){return this.store.Xd}get af(){return this.store.af}get da(){return this.store.da}Afb(){this.TNa();
this.store.af=!0;AOc(this)}render(a){this.store.sF?.render({distance:1,rotationPhi:this.store.DS.rotation.x,rotationTheta:this.store.DS.rotation.y,enableGrid:a})}constructor(a,b,c,d=wOc){this.store=a;this.sla=b;this.Uh=c;this.syb=d;this.Ala=(COc.G(this),e=>{I7(()=>{const f=this.store.tla,g=this.store.container;g&&this.store.isInitialized&&f&&(g.contains(e)&&g.removeChild(e),yOc(this,g),this.store.sF?.dispose(),this.store.sF=void 0,this.store.sF=tOc(this.sla,f),this.Uh.rca.push(this.Ala),this.store.isInitialized=
!0)})})}};var BOc=class{static G(a){L(a,{af:M7.ref,DS:M7.ref,Gga:M7.ref,eF:M7.ref,gha:M7.ref,hha:M7.ref,isInitialized:M7.ref,Xd:M7.ref,da:M7.ref,z_:M7.ref})}constructor(){this.container=(BOc.G(this),void 0);this.c_a=this.af=!1;this.DS={rotation:{x:0,y:0,z:0}};this.gha={left:0,top:0,width:1,height:1};this.Xd=this.isInitialized=!1;this.da=1;this.z_={left:0,top:0,width:1,height:1};this.oT=0}};var hPc=({BCb:a})=>cPc("div",{className:"Wfem7A",children:[E7("div",{className:"CSoSRg"}),E7("div",{className:"__J59g",style:{width:a?"100%":"init",height:a?"init":"100%",aspectRatio:"1"},children:E7("div",{className:"tEhdig"})})]}),QOc=({children:a,Xd:b})=>{const c=dPc(null),[d,e]=ePc(!1);F7(()=>{c.current&&e(c.current.clientWidth>=c.current.clientHeight)},[c]);return b?E7("div",{ref:c,className:"uDEnGQ",children:cPc("div",{className:"E8BDLQ",children:[E7("div",{className:"II7r4Q",children:a}),E7(hPc,
{BCb:d})]})}):a};var iPc=({EHb:a,DHb:b})=>{const c=dPc(null);F7(()=>{const d=c.current;c.current&&a(c.current);return()=>{d&&b()}},[c,a,b]);return E7("div",{ref:c,style:{display:"block",position:"absolute"}})};var jPc=class{get Ig(){return this.local.Ig}constructor(a){this.local=a;this.Lzb=b=>{const c=this.Ig.z_;b.style.width=2E3*this.Ig.da+"px";b.style.height=2E3*this.Ig.da+"px";b.style.left=`-${c.left*this.Ig.da}px`;b.style.top=`-${c.top*this.Ig.da}px`;yOc(this.Ig,b)};this.Kzb=()=>{var b=this.Ig;if(b.isInitialized&&b.store.container?.contains(b.Uh.canvas)){b.store.gha=b.o9();const c=document.createElement("canvas");xOc(b,b.store.oT,c);b.store.eF=c}b.store.container?.removeChild(b.Uh.canvas);b.store.container=
void 0}}};var OOc=({local:a})=>{const b=new jPc(a);return()=>E7(iPc,{EHb:b.Lzb,DHb:b.Kzb})};var kPc=({QN:a,cIb:b,onDispose:c})=>{const d=dPc(null);F7(()=>{d.current&&b(d.current);return()=>c()},[d,b,c]);F7(()=>{d.current&&a&&(a.style.width="100%",a.style.height="100%",d.current.firstChild&&d.current.removeChild(d.current.firstChild),d.current.appendChild(a))},[d,a]);return E7("div",{ref:d,style:{width:"100%",height:"100%"}})};var lPc=__c.vc("75810be2",!1),mPc=class{static G(a){L(a,{initialize:N7.bound,dispose:N7.bound,pZa:N7})}initialize(a){lPc||(this.store.container=a,this.store.qZa=L7(()=>[this.Ig.store.DS,this.Ig.af],this.Ozb,{fireImmediately:!1}),this.store.nZa=L7(()=>this.local.iua,this.Mzb,{fireImmediately:!0}))}dispose(){this.pZa();this.store.qZa?.();this.store.qZa=void 0;this.store.nZa?.();this.store.nZa=void 0}get QN(){return this.store.QN}b0(a){a=a.getBoundingClientRect();return Math.max(a.width,a.height)>100?
this.Ig.oT:300}get Ig(){return this.local.Ig}pZa(){this.store.QN=void 0}constructor(a,b){this.store=a;this.local=b;this.Ozb=(mPc.G(this),()=>{this.Ig.af||(this.local.iua?EOc(this):GOc(this))});this.Mzb=()=>{this.local.iua?EOc(this):GOc(this)}}};var nPc=class{static G(a){L(a,{QN:M7.ref})}constructor(){this.container=(nPc.G(this),void 0)}};var NOc=({local:a})=>{const b=new nPc,c=new mPc(b,a);return POc(()=>E7(kPc,{cIb:c.initialize,onDispose:c.dispose,QN:c.QN}))};var JOc=()=>E7("div",{className:"_7SJjPA"});var IOc=({y$:a})=>E7("img",{src:a,style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}});var MOc=class{static G(a){L(a,{initialize:N7,destroy:N7,Lia:K7,Xd:K7,isError:K7,y$:K7,vC:K7,ui:K7,P1a:N7,U1a:N7,V1a:N7})}async initialize(){const a=G7()();try{this.store.lub=L7(()=>this.vC,this.P1a,{fireImmediately:!0});const b=a.r(await a.s(qOc(this.xA,this.gq.D.scene.id)));I7(()=>{this.store.scene=b})}finally{a.s()}}destroy(){this.vC&&this.gq.local.G$--;this.gq.local.G$===0&&this.Ig.dispose();this.store.lub?.();this.store.rBa?.();this.store.qBa?.();this.store.rZa?.()}get Lia(){return this.hGa&&
this.vC&&!this.Ig.af||this.vC&&this.hGa&&!this.ui||!this.vC&&this.hGa?0:this.CCb&&this.Ig.af?1:this.ksa?2:this.y$?3:this.isError?4:5}get Xd(){return this.vC&&this.ui&&!this.Ig.isInitialized}get isError(){return!!this.store.scene&&!this.store.scene.files.oKa}get y$(){return this.store.scene?.files.oKa}get hGa(){return this.gq.local.jua}get ksa(){return this.gq.D.config.ref.snapshot?.id}get vC(){return!this.U7&&this.qe===30&&!this.Uh.u4a}get H3(){return this.store.H3}get ui(){return this.gq.local.selected}get CCb(){return this.vC&&
this.ui&&this.Ig.isInitialized}get Ig(){return this.gq.local.Ig}get D(){return this.gq.D}constructor(a,b,c,d,e,f,g){this.store=a;this.gq=b;this.qe=c;this.xA=d;this.Uh=e;this.Qqa=f;this.U7=g;this.Zzb=(MOc.G(this),()=>{if(!this.gq.local.jua){var h=this.Ig;h.store.eF&&(h.store.eF.width=1,h.store.eF.height=1,h.store.eF=void 0)}});this.P1a=(h,k)=>{this.store.rBa?.();this.store.qBa?.();this.store.rZa?.();k&&this.gq.local.G$--;this.vC?(this.gq.local.G$++,this.store.rBa=L7(()=>({selected:this.ui,scene:this.store.scene}),
({selected:l,scene:m})=>this.U1a(l,m),{fireImmediately:!0}),this.store.qBa=L7(()=>[this.gq.D.config.ref.rotationPhi,this.gq.D.config.ref.rotationTheta],this.Rzb,{fireImmediately:!0}),this.store.rZa=L7(()=>[this.gq.local.jua],this.Zzb,{fireImmediately:!1})):this.store.rBa=L7(()=>({selected:this.ui}),({selected:l})=>this.V1a(l),{fireImmediately:!0})};this.U1a=async(h,k)=>{const l=G7()();try{if(k!=null)if(!h)this.Ig.dispose();else if(!this.Ig.Xd){var m=__c.z(k.files.F1a);l.r(await l.s(this.Uh.QUb));
if(!this.Uh.u4a){var n=this.Qqa.startSpan("select");l.r(await l.s(WOc(this.Qqa,async()=>{const p=G7()();try{p.r(await p.s(this.Ig.initialize(m)))}finally{p.s()}},n)));n.end()}}}finally{l.s()}};this.V1a=h=>{this.store.H3=this.U7;h||(this.store.H3=!1)};this.Rzb=()=>{this.Ig.af||this.Ig.ieb({rotation:{x:this.gq.D.config.ref.rotationPhi,y:this.gq.D.config.ref.rotationTheta,z:0}})}}};var LOc=class{static G(a){L(a,{scene:M7.ref,H3:M7.ref})}constructor(){this.qBa=(LOc.G(this),void 0);this.H3=!1}};var oPc=class{startSpan(a,b){a=`scene.${a}`;return b?this.ib.startSpan(a,b):this.ib.Ci(a,{nr:{name:`editor.${a}`,performance:{ZJ:!0}}})}constructor(a){this.ib=a}};var pPc=__c.vc("5eb77351",!1),qPc=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi)||pPc,rPc=class{static G(a){L(a,{swa:M7.ref})}get u4a(){return this.swa}get QUb(){this.xHa&&this.xHa();this.E5||(this.E5=ZOc(this));return this.E5}get canvas(){this.jR||(this.jR=H7());return this.jR}get Cjb(){return this.pR}getImageData(){__c.y(this.pR!=null,"WebGlRenderer is not initialized");return this.pR.readPixels()}constructor(a){this.K=a;this.jR=(rPc.G(this),void 0);this.rca=[];this.swa=!1;qPc||(this.jR=
H7(),this.E5=ZOc(this))}};var sPc=__c.K_()(()=>({J_b(a,b,c){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:void 0,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},U:{width:b,height:c}}},K_b(a,b,c,d){return{data:{D:{scene:{type:"scene",id:a,version:0},config:{snapshot:b,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},U:{width:c,height:d}}}}));var tPc=__c.R_({D:__c.Q_({scene:J0.Zj(1,"SceneRef"),config:J0.dVa(2,{snapshot:J0.$Ib(1,"MediaRef"),rotationPhi:J0.DZa(2,{min:0,max:6.284}),rotationTheta:J0.DZa(3,{min:-1.571,max:1.571})})})});var uPc,vPc;uPc=__c.vc("646956e3",!1);vPc=__c.A_()(({fi:a,gI:b})=>{var c=b.ib;b=b.K.yd("scene_widget_rendering");c=new oPc(c);const d=new rPc(b),e=new fPc(d),f=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi)&&!uPc;b={U7:f};a=UOc({xA:a.xA,Uh:d,Qqa:c,exports:b,U7:f});return{metadata:{type:"scene",name:__c.J("6XoKOg"),JW:g=>g.scene.id},q7:()=>{const g=DOc({sla:e,Uh:d});return new gPc(g)},D:__c.z_(a),exports:b}});__c.X_={};__c.X_.sXb=gPc;__c.X_.dh=sPc;__c.X_.Ao=vPc;__c.X_.eh=tPc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/f31146c9cd0086c0.js.map